(this.webpackJsonpheartsight=this.webpackJsonpheartsight||[]).push([[0],{404:function(e,t,a){},552:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(29),r=a.n(i),s=(a(404),a(688)),l=a(664),o=a(666),d=a(156),u=a(667),j=a(343),b=a.n(j),h=a(662),m=a(695),p=a(17),x=a.n(p),O=a(35),f=a(10),g=a(117);a(553),a(406);g.a.initializeApp({apiKey:"AIzaSyCgYqq7n8HfuCs8SjPayoEiyknqDbO_AyA",authDomain:"fit3170-mobile-app.firebaseapp.com",projectId:"fit3170-mobile-app",storageBucket:"fit3170-mobile-app.appspot.com",messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"/FIT3170-webapp",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyCgYqq7n8HfuCs8SjPayoEiyknqDbO_AyA",REACT_APP_AUTH_DOMAIN:"fit3170-mobile-app.firebaseapp.com",REACT_APP_PROJECT_ID:"fit3170-mobile-app",REACT_APP_STORAGE_BUCKET:"fit3170-mobile-app.appspot.com",REACT_APP_MESSAGE_SENDER_ID:"1178573807",REACT_APP_APP_ID:"1:1178573807:web:6c1fbec88ed6e2e7f5b41a"}).REACT_APP_MESSAGING_SENDER_ID,appId:"1:1178573807:web:6c1fbec88ed6e2e7f5b41a"});var v=g.a.auth(),C=g.a.firestore(),y=a(699),N=a(2),w=Object(n.createContext)(null);function P(){return Object(n.useContext)(w)}var F=function(e){var t=e.children,a=Object(n.useState)(null),c=Object(f.a)(a,2),i=c[0],r=c[1],s=Object(n.useState)(!0),l=Object(f.a)(s,2),o=l[0],d=l[1];function u(){return(u=Object(O.a)(x.a.mark((function e(t,a,n){var c,i,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.createUserWithEmailAndPassword(t,a);case 3:return i=e.sent,r=null===i||void 0===i||null===(c=i.user)||void 0===c?void 0:c.uid,e.next=7,C.collection("doctors").doc(r).set(n);case 7:e.sent,e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),alert(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function j(){return(j=Object(O.a)(x.a.mark((function e(){var t,a,n,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(t=Object(y.a)()).toString().replaceAll("-",""),a=new Date(Date.now()+864e5),n=g.a.firestore.Timestamp.fromDate(a),e.prev=4,c=i.uid,e.next=8,C.collection("invites").doc(t).set({doctorId:c,validUntil:n});case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(4),console.log(e.t0),alert(e.t0);case 14:return e.abrupt("return",t);case 15:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}function b(){return(b=Object(O.a)(x.a.mark((function e(){var t,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,C.collection("patients");case 3:return a=e.sent,a.get().then((function(e){e.forEach((function(e){a.doc(e.id).collection("notificationHistory").get().then((function(a){a.forEach((function(a){var n=new Date(1e3*a.data().notificationTime.seconds);n=n.toString(),t.push({alert:a.data().notificationTitle,givenName:e.data().givenName,surName:e.data().familyName,id:e.id,time:n.substring(0,15)+" at "+n.substring(16,21)+" Hours"})}))}))}))})),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h={currentUser:i,signUp:function(e,t,a){return u.apply(this,arguments)},createInvite:function(){return j.apply(this,arguments)},pullAlerts:function(){return b.apply(this,arguments)},login:function(e,t){return v.signInWithEmailAndPassword(e,t)},logout:function(){return v.signOut()},updateDisplayName:function(e){return i.updateProfile({displayName:e})},updatePassword:function(e){return i.updatePassword(e)},sendPasswordResetEmail:function(e){return v.sendPasswordResetEmail(e)}};return Object(n.useEffect)((function(){return v.onAuthStateChanged((function(e){r(e),d(!1)}))}),[]),Object(N.jsx)(w.Provider,{value:h,children:!o&&t})},k=Object(h.a)((function(e){return{appBar:{zIndex:e.zIndex.drawer+1,backgroundColor:"#6200EE",fontWeight:"bold"},icon:{marginRight:"0.8rem",color:"red"}}})),S=function(){var e=k(),t=P().logout;return Object(N.jsx)(l.a,{position:"fixed",className:e.appBar,children:Object(N.jsx)(o.a,{children:Object(N.jsxs)(u.a,{justify:"space-between",container:!0,children:[Object(N.jsx)(d.a,{variant:"h6",noWrap:!0,children:"Dashboard"}),Object(N.jsxs)(m.a,{display:"flex",alignItems:"center",children:[Object(N.jsx)(b.a,{className:e.icon}),Object(N.jsx)(d.a,{variant:"h6",noWrap:!0,onClick:t,children:"Heartsight"})]})]})})})},I=a(702),E=a(668),A=a(669),D=a(670),W=a(671),T=a(344),_=a.n(T),R=a(345),L=a.n(R),q=a(346),U=a.n(q),G=a(348),B=a.n(G),z=a(349),H=a.n(z),M=a(350),V=a.n(M),K=a(347),Y=a.n(K),J=a(672),Q=a(248),X=a.n(Q),Z=a(249),$=a.n(Z),ee=a(43),te=Object(h.a)((function(e){return{drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerContainer:{overflow:"auto"},nested:{paddingLeft:e.spacing(4)}}})),ae=function(){var e=te(),t=c.a.useState(!0),a=Object(f.a)(t,2),n=a[0],i=a[1],r=c.a.useState(!0),s=Object(f.a)(r,2),l=s[0],d=s[1];return Object(N.jsxs)(I.a,{className:e.drawer,variant:"permanent",classes:{paper:e.drawerPaper},children:[Object(N.jsx)(o.a,{}),Object(N.jsx)("div",{className:e.drawerContainer,children:Object(N.jsxs)(E.a,{component:"nav","aria-labelledby":"nested-list-subheader",children:[Object(N.jsxs)(A.a,{button:!0,component:ee.b,to:"/",children:[Object(N.jsx)(D.a,{children:Object(N.jsx)(_.a,{})}),Object(N.jsx)(W.a,{primary:"Dashboard"})]}),Object(N.jsxs)(A.a,{button:!0,onClick:function(){return i(!n)},children:[Object(N.jsx)(D.a,{children:Object(N.jsx)(L.a,{})}),Object(N.jsx)(W.a,{primary:"Patients"}),n?Object(N.jsx)(X.a,{}):Object(N.jsx)($.a,{})]}),Object(N.jsxs)(J.a,{in:n,timeout:"auto",unmountOnExit:!0,children:[Object(N.jsx)(E.a,{component:"div",disablePadding:!0,children:Object(N.jsxs)(A.a,{button:!0,component:ee.b,to:"/patients",className:e.nested,children:[Object(N.jsx)(D.a,{children:Object(N.jsx)(U.a,{})}),Object(N.jsx)(W.a,{primary:"My Patients"})]})}),Object(N.jsx)(E.a,{component:"div",disablePadding:!0,children:Object(N.jsxs)(A.a,{button:!0,component:ee.b,to:"/patient/add",className:e.nested,children:[Object(N.jsx)(D.a,{children:Object(N.jsx)(Y.a,{})}),Object(N.jsx)(W.a,{primary:"Add Patients"})]})}),Object(N.jsx)(E.a,{component:"div",disablePadding:!0,children:Object(N.jsxs)(A.a,{button:!0,component:ee.b,to:"/patient/alerts",className:e.nested,children:[Object(N.jsx)(D.a,{children:Object(N.jsx)(B.a,{})}),Object(N.jsx)(W.a,{primary:"Alerts"})]})})]}),Object(N.jsxs)(A.a,{button:!0,onClick:function(){return d(!l)},component:ee.b,to:"/profile",children:[Object(N.jsx)(D.a,{children:Object(N.jsx)(H.a,{})}),Object(N.jsx)(W.a,{primary:"Doctor"}),l?Object(N.jsx)(X.a,{}):Object(N.jsx)($.a,{})]}),Object(N.jsx)(J.a,{in:l,timeout:"auto",unmountOnExit:!0,children:Object(N.jsx)(E.a,{component:"div",disablePadding:!0,children:Object(N.jsxs)(A.a,{button:!0,component:ee.b,to:"/doctor/profile",className:e.nested,children:[Object(N.jsx)(D.a,{children:Object(N.jsx)(V.a,{})}),Object(N.jsx)(W.a,{primary:"View Profile"})]})})})]})})]})},ne=a(41),ce=a(19),ie=a(674),re=a(678),se=a(677),le=a(673),oe=a(675),de=a(676),ue=a(555),je=Object(h.a)({table:{minWidth:650}});function be(e){var t=e.header,a=e.rows,n=e.onClick,c=Object(ne.g)(),i=je();return Object(N.jsx)(le.a,{component:ue.a,children:Object(N.jsxs)(ie.a,{className:i.table,"aria-label":"simple table",children:[Object(N.jsx)(oe.a,{children:Object(N.jsx)(de.a,{children:t.map((function(e){return Object(N.jsx)(se.a,{align:"center",variant:"head",children:Object(N.jsx)(d.a,{style:{fontWeight:600},children:e.title})},e.field)}))})}),Object(N.jsx)(re.a,{children:a.map((function(e,a){return Object(N.jsx)(de.a,{onClick:n?function(){return function(e){c.push({pathname:"/patients/patient",state:e})}(e)}:null,hover:!0,children:t.map((function(t){return Object(N.jsx)(se.a,{align:"center",children:e[t.field]},t.field)}))},a)}))})]})})}for(var he=function(){var e=Object(n.useState)([]),t=Object(f.a)(e,2),a=t[0],c=t[1],i=P().currentUser;return Object(n.useEffect)((function(){var e=[];C.collection("/doctors/".concat(i.uid,"/linkedPatients")).get().then((function(t){console.log(t),t.forEach((function(t){var a=Object(ce.a)(Object(ce.a)({},t.data()),{},{id:t.id});a.dateOfBirth=a.dateOfBirth.toDate().toISOString().substring(0,10),e.push(a)})),c(e)}))}),[]),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("h1",{children:"My Patients"}),Object(N.jsx)(be,{header:[{field:"givenName",title:"Given Name"},{field:"familyName",title:"Family Name"},{field:"dateOfBirth",title:"Date of Birth"}],rows:a,onClick:!0})]})},me=a(679),pe=a(351),xe=a.n(pe),Oe=Object(h.a)((function(e){return{content:{flexGrow:1,padding:e.spacing(3)},root:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center",flexDirection:"column",paddingTop:"-64px"},header:{textAlign:"center",fontSize:"3rem"},qrCode:{width:"18rem"},sub:{fontSize:"1.75rem"},spinner:{height:"60px",width:"60px"}}})),fe=function(){var e=Oe(),t=P(),a=t.currentUser,c=t.createInvite,i=Object(n.useState)(""),r=Object(f.a)(i,2),s=r[0],l=r[1];return Object(n.useEffect)(Object(O.a)(x.a.mark((function e(){var t,n,i,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:return t=e.sent,n=a.uid,e.next=6,C.collection("doctors").doc(n).get();case 6:i=e.sent,i.data(),r="".concat(t,"-").concat(n),xe.a.toDataURL(r).then(l);case 10:case"end":return e.stop()}}),e)}))),[]),Object(N.jsxs)("div",{className:e.root,children:[Object(N.jsx)("h1",{className:e.header,children:"Patient Link QR Code"}),Object(N.jsx)("img",{className:e.qrCode,src:s}),Object(N.jsx)("p",{className:e.sub,children:"Waiting for a patient to scan the code..."}),Object(N.jsx)(me.a,{className:e.spinner,color:"secondary"})]})},ge=a(680),ve=a(144),Ce=a.n(ve),ye=a(693),Ne=function(e){return Object(N.jsx)("form",{id:e.formId,className:e.classes.form,noValidate:!0,onSubmit:e.handleSubmitWithCleanup,children:Object(N.jsxs)(u.a,{container:!0,spacing:1,children:[Object(N.jsx)(u.a,{item:!0,xs:6,children:Object(N.jsx)(d.a,{children:"Given Name:"})}),Object(N.jsx)(u.a,{item:!0,xs:6,children:Object(N.jsx)(ye.a,{required:!0,onChange:e.handleInputChange,value:e.inputs.givenName,name:"givenName",className:e.classes.textfield,variant:"outlined",id:"givenName",autoComplete:"givenName",fullWidth:!0,size:"small",InputLabelProps:{shrink:!0}})}),Object(N.jsx)(u.a,{item:!0,xs:6,children:Object(N.jsx)(d.a,{children:"Family Name:"})}),Object(N.jsx)(u.a,{item:!0,xs:6,children:Object(N.jsx)(ye.a,{required:!0,onChange:e.handleInputChange,value:e.inputs.familyName,fullWidth:!0,size:"small",name:"familyName",className:e.classes.textfield,variant:"outlined",id:"familyName",autoComplete:"familyName",InputLabelProps:{shrink:!0}})}),Object(N.jsx)(u.a,{item:!0,xs:6,children:Object(N.jsx)(d.a,{children:"Date of Birth:"})}),Object(N.jsx)(u.a,{item:!0,xs:6,children:Object(N.jsx)(ye.a,{required:!0,fullWidth:!0,size:"small",onChange:e.handleInputChange,value:e.inputs.dob,name:"dob",type:"date",className:e.classes.textfield,variant:"outlined",id:"dob",InputLabelProps:{shrink:!0}})}),Object(N.jsx)(u.a,{item:!0,xs:6,children:Object(N.jsx)(d.a,{children:"Gender:"})}),Object(N.jsx)(u.a,{item:!0,xs:6,children:Object(N.jsx)(ye.a,{required:!0,onChange:e.handleInputChange,value:e.inputs.gender,fullWidth:!0,size:"small",name:"gender",className:e.classes.textfield,variant:"outlined",id:"gender",autoComplete:"gender",InputLabelProps:{shrink:!0}})}),Object(N.jsx)(u.a,{item:!0,xs:6,children:Object(N.jsx)(d.a,{children:"Place of Practice:"})}),Object(N.jsx)(u.a,{item:!0,xs:6,children:Object(N.jsx)(ye.a,{required:!0,onChange:e.handleInputChange,value:e.inputs.placeOfPractice,fullWidth:!0,size:"small",name:"placeOfPractice",className:e.classes.placeOfPractice,variant:"outlined",id:"placeOfPractice",autoComplete:"placeOfPractice",InputLabelProps:{shrink:!0}})})]})})},we=a(11),Pe=function(e){var t=Object(n.useState)({}),a=Object(f.a)(t,2),c=a[0],i=a[1];return{handleSubmit:function(t){return t&&t.preventDefault(),e()},handleInputChange:function(e){console.log(c),e.persist(),i((function(t){return Object(ce.a)(Object(ce.a)({},t),{},Object(we.a)({},e.target.name,e.target.value))}))},handleCheckboxChange:function(e){console.log(c),e.persist(),i((function(t){return Object(ce.a)(Object(ce.a)({},t),{},Object(we.a)({},e.target.name,e.target.checked))}))},inputs:c,setInputs:i}},Fe=Object(h.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary,height:"100%"}}})),ke="updateProfileForm",Se=function(e){return Object(N.jsx)(u.a,{container:!0,spacing:3,children:e.fields.map((function(t,a){return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(u.a,{item:!0,xs:6,children:Object(N.jsxs)(d.a,{children:[t.title,":"]})},a),Object(N.jsx)(u.a,{item:!0,xs:6,children:Object(N.jsx)(d.a,{align:"left",children:e.doctorProfileInfo[t.field]})},a)]})}))})},Ie=function(e){return Object(N.jsx)(ge.a,{onClick:e.onClick,display:"inline",style:{float:"left",backgroundColor:"#6200EE",color:"#FFFFFF"},children:"Edit Profile"})},Ee=function(e){return Object(N.jsxs)("div",{style:{float:"right"},children:[Object(N.jsx)(ge.a,{onClick:e.onClick,children:"Cancel"}),Object(N.jsx)(ge.a,{type:"submit",form:ke,style:{backgroundColor:"#6200EE",color:"#FFFFFF"},variant:"contained",className:e.classes.submit,children:"Save"})]})},Ae=function(e){Object(ne.h)();var t=P().currentUser,a=Fe(),c=Object(n.useState)({}),i=Object(f.a)(c,2),r=i[0],s=i[1],l=Object(n.useState)(""),o=Object(f.a)(l,2),j=(o[0],o[1]),b=Object(n.useState)(!1),h=Object(f.a)(b,2),m=h[0],p=h[1],g=Pe(function(){var e=Object(O.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.collection("doctors").doc(t.uid).set({givenName:y.givenName,familyName:y.familyName,email:y.email,dob:new Date(y.dob),gender:y.gender,placeOfPractice:y.placeOfPractice});case 3:s({givenName:y.givenName,familyName:y.familyName,email:y.email,dob:y.dob,gender:y.gender,placeOfPractice:y.placeOfPractice}),p(!1),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),alert("Update failed: ".concat(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()),v=g.setInputs,y=g.inputs,w=g.handleInputChange,F=g.handleCheckboxChange,k=g.handleSubmit;Object(n.useEffect)(Object(O.a)(x.a.mark((function e(){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.collection("doctors").doc(t.uid).get();case 2:a=e.sent,console.log(a),n=a.data(),console.log(n),s({givenName:n.givenName,familyName:n.familyName,dob:n.dob.toDate().toISOString().substring(0,10),email:n.email,gender:n.gender,placeOfPractice:n.placeOfPractice});case 7:case"end":return e.stop()}}),e)}))),[]);return Object(N.jsx)(N.Fragment,{children:Object(N.jsx)("div",{className:a.root,children:Object(N.jsxs)(u.a,{container:!0,spacing:3,children:[Object(N.jsx)(u.a,{item:!0,xs:2,children:Object(N.jsx)(ue.a,{className:a.paper,children:Object(N.jsx)(Ce.a,{fontSize:"large"})})}),Object(N.jsx)(u.a,{item:!0,xs:10,children:Object(N.jsx)(ue.a,{className:a.paper,children:Object(N.jsxs)(u.a,{container:!0,spacing:3,children:[Object(N.jsx)(u.a,{item:!0,xs:12,children:Object(N.jsx)(d.a,{variant:"h5",display:"inline",style:{float:"left"},children:"Doctor"})}),Object(N.jsx)(u.a,{item:!0,xs:12,children:Object(N.jsxs)(d.a,{display:"inline",style:{float:"left"},children:[r.givenName," ",r.familyName]})}),Object(N.jsx)(u.a,{children:Object(N.jsx)(d.a,{display:"inline",style:{float:"left"},children:r.email})}),Object(N.jsx)(u.a,{item:!0,xs:12,children:m?Object(N.jsx)(Ee,{classes:a,onClick:function(){return p(!1)}}):Object(N.jsx)(Ie,{onClick:function(){p(!0),v(r)}})})]})})}),Object(N.jsx)(u.a,{item:!0,xs:12,children:Object(N.jsx)(ue.a,{className:a.paper,children:m?Object(N.jsx)(Ne,{classes:a,handleSubmitWithCleanup:k,handleInputChange:w,handleCheckboxChange:F,inputs:y,setError:j,formId:ke}):Object(N.jsx)(Se,{fields:[{field:"givenName",title:"Given Name"},{field:"familyName",title:"Family Name"},{field:"dob",title:"Date of Birth"},{field:"gender",title:"Gender"},{field:"placeOfPractice",title:"Place of Practice"}],doctorProfileInfo:r})})})]})})})},De=a(70),We=a(696),Te=a(687),_e=a(352),Re=a(705),Le=a(694),qe=a(704),Ue=a(692),Ge=a(711),Be=(a(359),function(e){var t,a=e.title,c=e.patientData,i=Object(n.useState)([]),r=Object(f.a)(i,2),s=r[0],l=r[1],o=Object(n.useState)(0),u=Object(f.a)(o,2),j=u[0],b=u[1],h=Object(n.useState)(),m=Object(f.a)(h,2);m[0],m[1];Object(n.useEffect)(Object(O.a)(x.a.mark((function e(){var t,a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Loading ECG data"),t=new Date("2021-10-9"),a=new Date,n=[],e.next=6,C.collection("patients").doc(c.id).collection("ecgReadings").orderBy("startTime","desc").limit(20).get();case 6:e.sent.forEach((function(e){var c=e.data();if(c.startTime.toDate()>t&&c.startTime.toDate()<a){var i=c.data.map((function(e){return{x:new Date(e.time),y:e.value,key:new Date(e.time)}})),r={startTime:c.startTime.toDate(),data:i,patientId:c.patientId};n.push(r)}})),l(n);case 9:case"end":return e.stop()}}),e)}))),[]);return s.length>0?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(d.a,{variant:"h5",style:{marginTop:10},children:a}),Object(N.jsxs)(qe.a,{fullWidth:!0,children:[Object(N.jsx)(Re.a,{id:"demo-simple-select-label",children:"Data Packet"}),Object(N.jsx)(Ue.a,{labelId:"demo-simple-se lect-label",id:"demo-simple-select",value:j,label:"Data Packet",onChange:function(e){b(e.target.value)},children:s.map((function(e,t){return Object(N.jsx)(Le.a,{value:t,children:e.startTime.toString()},t)}))})]}),Object(N.jsx)(_e.a,(t={data:function(){var e=[];return-1!==j?e=e.concat(s[j].data):s.forEach((function(t){e=e.concat(t.data)})),[{color:"hsl(29, 70%, 50%)",data:e}]}(),margin:{top:20,right:50,bottom:50,left:60},xScale:{type:"time",precision:"millisecond"},yScale:{type:"linear",min:"auto",max:"auto",stacked:!0,reverse:!1},axisTop:null,axisRight:null,axisBottom:null,yFormat:" >-.2f"},Object(we.a)(t,"axisBottom",{orient:"bottom",tickValues:10,legend:"Timestamp",format:"%H:%M:%S"}),Object(we.a)(t,"axisLeft",{orient:"left",tickSize:5,tickPadding:5,tickRotation:0,legend:a,legendOffset:-50,legendPosition:"middle"}),Object(we.a)(t,"pointSize",10),Object(we.a)(t,"pointColor",{theme:"background"}),Object(we.a)(t,"pointBorderWidth",2),Object(we.a)(t,"pointBorderColor",{from:"serieColor"}),Object(we.a)(t,"pointLabelYOffset",-12),Object(we.a)(t,"useMesh",!0),Object(we.a)(t,"legends",[]),t))]}):Object(N.jsx)(Ge.a,{})}),ze=[],He=0;He<100;He++){var Me=Math.round(120-40*Math.random());ze.push(Me)}function Ve(e){var t=e.children,a=e.value,n=e.index,c=Object(De.a)(e,["children","value","index"]);return Object(N.jsx)("div",Object(ce.a)(Object(ce.a)({role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},c),{},{style:{height:500,justifyContent:"center",textAlign:"center",padding:20},children:t}))}var Ke=Object(h.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper}}}));function Ye(e){var t=e.headers,a=e.patientData,n=Ke(),i=c.a.useState(0),r=Object(f.a)(i,2),s=r[0],o=r[1];return Object(N.jsxs)("div",{className:n.root,children:[Object(N.jsx)(l.a,{position:"static",children:Object(N.jsx)(We.a,{value:s,onChange:function(e,t){o(t)},"aria-label":"simple tabs example",style:{backgroundColor:"#6200EE"},children:t.map((function(e,t){return Object(N.jsx)(Te.a,Object(ce.a)({label:e},{id:"simple-tab-".concat(a=t),"aria-controls":"simple-tabpanel-".concat(a)}),t);var a}))})}),Object(N.jsx)(Ve,{value:s,index:0,children:Object(N.jsx)(be,{header:[{field:"alertType",title:"Alert Type"},{field:"date",title:"Alert Date "}],rows:[{alertType:"High Heart Rate",date:"01-04-2021"},{alertType:"Unusual ECG Pattern",date:"05-04-2021"}]})}),Object(N.jsx)(Ve,{value:s,index:1,children:Object(N.jsx)(Be,{title:"ECG Reading",patientData:a})}),Object(N.jsx)(Ve,{value:s,index:2})]})}var Je=Object(h.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary,height:"100%"}}})),Qe="updateProfileForm",Xe=function(e){Object(ne.h)();var t=P().currentUser,a=Je(),c=Object(n.useState)(""),i=Object(f.a)(c,2),r=(i[0],i[1]),s=Pe(function(){var e=Object(O.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.collection("doctors").doc(t.uid).set({givenName:o.givenName,familyName:o.familyName,email:o.email,dob:new Date(o.dob),gender:o.gender,placeOfPractice:o.placeOfPractice});case 2:alert("User profile successfully updated");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),l=s.setInputs,o=s.inputs,j=s.handleInputChange,b=s.handleCheckboxChange,h=s.handleSubmit,m=Object(n.useState)({}),p=Object(f.a)(m,2),g=p[0],v=p[1];return Object(n.useEffect)(Object(O.a)(x.a.mark((function e(){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.collection("doctors").doc(t.uid).get();case 2:a=e.sent,console.log(a),n=a.data(),console.log(n),v({givenName:n.givenName,familyName:n.familyName,dob:n.dob.toDate().toISOString().substring(0,10),email:n.email,gender:n.gender,placeOfPractice:n.placeOfPractice}),l({givenName:n.givenName,familyName:n.familyName,dob:n.dob.toDate().toISOString().substring(0,10),email:n.email,gender:n.gender,placeOfPractice:n.placeOfPractice});case 8:case"end":return e.stop()}}),e)}))),[]),Object(N.jsx)(N.Fragment,{children:Object(N.jsx)("div",{className:a.root,children:Object(N.jsxs)(u.a,{container:!0,spacing:3,children:[Object(N.jsx)(u.a,{item:!0,xs:2,children:Object(N.jsx)(ue.a,{className:a.paper,children:Object(N.jsx)(Ce.a,{fontSize:"large"})})}),Object(N.jsx)(u.a,{item:!0,xs:10,children:Object(N.jsx)(ue.a,{className:a.paper,children:Object(N.jsxs)(u.a,{container:!0,spacing:3,children:[Object(N.jsx)(u.a,{item:!0,xs:12,children:Object(N.jsx)(d.a,{variant:"h5",display:"inline",style:{float:"left"},children:"Doctor"})}),Object(N.jsx)(u.a,{item:!0,xs:12,children:g&&Object(N.jsxs)(d.a,{display:"inline",style:{float:"left"},children:[g.givenName," ",g.familyName]})}),Object(N.jsxs)(u.a,{item:!0,xs:12,children:[Object(N.jsx)(ge.a,{button:!0,component:ee.b,to:"/doctor/profile",children:"Cancel"}),Object(N.jsx)(ge.a,{type:"submit",form:Qe,style:{backgroundColor:"#5784FF",color:"#FFFFFF"},variant:"contained",className:a.submit,children:"Save"})]})]})})}),Object(N.jsx)(u.a,{item:!0,xs:12,children:Object(N.jsx)(ue.a,{className:a.paper,children:Object(N.jsx)(u.a,{container:!0,spacing:5,justify:"center",children:Object(N.jsx)(Ne,{classes:a,handleSubmitWithCleanup:h,handleInputChange:j,handleCheckboxChange:b,inputs:o,setError:r,formId:Qe})})})})]})})})},Ze=function(){return Object(N.jsx)("div",{children:Object(N.jsx)("h1",{children:"Dashboard Analytics"})})},$e=Object(h.a)({table:{minWidth:650},TableCell:{color:"red"}});function et(e){var t=e.header,a=e.rows,n=$e();return Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)(le.a,{component:ue.a,children:[Object(N.jsx)(ie.a,{className:n.table,"aria-label":"simple table"}),Object(N.jsx)(re.a,{children:a.map((function(e,a){return Object(N.jsx)(de.a,{hover:!0,children:t.map((function(t){return Object(N.jsx)(se.a,{align:"center",children:e[t.field]},t.field)}))},a)}))})]})})}function tt(e){return new Promise((function(t){return setTimeout(t,e)}))}a(703).a;var at=function(){var e,t=Object(n.useState)([]),a=Object(f.a)(t,2),c=a[0],i=a[1],r=P().pullAlerts;return Object(n.useEffect)(Object(O.a)(x.a.mark((function t(){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r();case 2:return e=t.sent,t.next=5,tt(1e3);case 5:i(e);case 6:case"end":return t.stop()}}),t)}))),[]),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("h1",{children:"Alerts"}),Object(N.jsx)(et,{header:[{field:"alert"},{field:"givenName"},{field:"surName"},{field:"id"},{field:"time"}],rows:c,onClick:!0})]})},nt=Object(h.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary,height:"100%"}}})),ct=function(e){var t=Object(ne.h)().state,a=nt(),n=P().currentUser,c=Object(ne.g)();return Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)("div",{className:a.root,children:[Object(N.jsxs)(u.a,{container:!0,spacing:3,children:[Object(N.jsx)(u.a,{item:!0,xs:2,children:Object(N.jsx)(ue.a,{className:a.paper,children:Object(N.jsx)(Ce.a,{fontSize:"large"})})}),Object(N.jsx)(u.a,{item:!0,xs:2,children:Object(N.jsx)(ue.a,{className:a.paper,children:Object(N.jsxs)(u.a,{container:!0,spacing:3,children:[Object(N.jsx)(u.a,{item:!0,xs:12,children:Object(N.jsx)(d.a,{variant:"h5",children:"Patient"})}),Object(N.jsx)(u.a,{item:!0,xs:12,children:Object(N.jsxs)(d.a,{children:[t.givenName," ",t.surname]})}),Object(N.jsx)(u.a,{item:!0,xs:12,children:Object(N.jsx)(ge.a,{style:{backgroundColor:"red",color:"white"},onClick:function(){C.collection("/doctors/".concat(n.uid,"/linkedPatients")).doc(t.id).delete().then((function(){C.collection("/patients").doc(t.id).update({doctors:g.a.firestore.FieldValue.arrayRemove(n.uid)}).then((function(){c.push({pathname:"/patients",state:{}}),console.log("deleted")}))}))},children:"Unlink Patient"})})]})})}),Object(N.jsx)(u.a,{item:!0,xs:8,children:Object(N.jsx)(ue.a,{className:a.paper,children:Object(N.jsx)(u.a,{container:!0,spacing:3,justify:"center",children:[{field:"email",title:"Email"},{field:"occupation",title:"Occupation"},{field:"age",title:"Age"},{field:"gender",title:"Gender"},{field:"phone",title:"Phone"},{field:"maritalStatus",title:"Marital Status"}].map((function(e,a){return Object(N.jsx)(u.a,{item:!0,xs:6,children:Object(N.jsxs)(d.a,{children:[e.title,": ",t[e.field]]})},a)}))})})})]}),Object(N.jsx)("div",{style:{height:20}}),Object(N.jsx)(Ye,{headers:["Alerts","ECG History","Heartrate"],patientData:t})]})})},it=Object(h.a)((function(e){return{content:{flexGrow:1,padding:e.spacing(3)}}})),rt=function(){var e=it();return Object(N.jsxs)("main",{className:e.content,children:[Object(N.jsx)(o.a,{}),Object(N.jsxs)(ne.d,{children:[Object(N.jsx)(ne.b,{exact:!0,path:"/",children:Object(N.jsx)(Ze,{})}),Object(N.jsx)(ne.b,{exact:!0,path:"/patients",children:Object(N.jsx)(he,{})}),Object(N.jsx)(ne.b,{exact:!0,path:"/patients/patient",children:Object(N.jsx)(ct,{})}),Object(N.jsx)(ne.b,{exact:!0,path:"/patient/add",children:Object(N.jsx)(fe,{})}),Object(N.jsx)(ne.b,{exact:!0,path:"/patient/alerts",children:Object(N.jsx)(at,{})}),Object(N.jsx)(ne.b,{exact:!0,path:"/doctor/profile",children:Object(N.jsx)(Ae,{})}),Object(N.jsx)(ne.b,{exact:!0,path:"/doctor/profile/update",children:Object(N.jsx)(Xe,{})})]})]})},st=Object(h.a)((function(e){return{root:{display:"flex",height:"100vh",overflowY:"scroll"}}})),lt=function(){var e=st();return Object(N.jsxs)("div",{className:e.root,children:[Object(N.jsx)(s.a,{}),Object(N.jsx)(S,{}),Object(N.jsx)(ae,{}),Object(N.jsx)(rt,{})]})},ot=function(e){var t=e.component,a=Object(De.a)(e,["component"]),n=P().currentUser;return Object(N.jsx)(ne.b,Object(ce.a)(Object(ce.a)({},a),{},{render:function(e){return n?Object(N.jsx)(t,Object(ce.a)({},e)):Object(N.jsx)(ne.a,{to:"/login"})}}))},dt=a(689),ut=a(700),jt=a(691),bt=a(698),ht=a.p+"static/media/Heartsight_Landing_Image.d63284ed.png",mt=Object(h.a)((function(e){return{root:{height:"100vh"},image:{height:"100vh",width:"100vw",backgroundImage:"url(".concat(ht,")"),backgroundSize:"cover",backgroundPosition:"center"},paperbase:{backgroundColor:"#6200EE",color:"#FFFFFF"},paper:{margin:e.spacing(19,15),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%"},submit:{margin:e.spacing(3,0,2)},textfield:{backgroundColor:"#FFFFFF",color:"#FFFFFF",opacity:1,borderRadius:5}}})),pt=function(e){return Object(N.jsxs)("form",{className:e.classes.form,noValidate:!0,onSubmit:e.handleSubmitWithCleanup,children:[Object(N.jsx)(ye.a,{margin:"normal",required:!0,fullWidth:!0,onChange:e.handleInputChange,value:e.inputs.email,name:"email",className:e.classes.textfield,variant:"outlined",id:"email",placeholder:"Enter your email",autoComplete:"email",InputLabelProps:{shrink:!0}}),Object(N.jsx)(ye.a,{margin:"normal",fullWidth:!0,className:e.classes.textfield,variant:"outlined",onChange:e.handleInputChange,required:!0,value:e.inputs.password,name:"password",placeholder:"Enter your password",type:"password",id:"password",autoComplete:"current-password",InputLabelProps:{shrink:!0}}),Object(N.jsxs)(u.a,{container:!0,alignItems:"center",children:[Object(N.jsx)(u.a,{item:!0,xs:!0,children:Object(N.jsx)(dt.a,{control:Object(N.jsx)(ut.a,{name:"rememberMe",checked:e.inputs.rememberMe,onChange:e.handleCheckboxChange,style:{color:"#FFFFFF"}}),label:"Remember me"})}),Object(N.jsx)(u.a,{item:!0,styles:{textAlign:"right"},children:Object(N.jsx)(jt.a,{href:"#",variant:"body1",style:{color:"#FFFFFF"},onClick:e.showRecoverPassword,children:"Recover Password"})})]}),Object(N.jsxs)(u.a,{container:!0,alignItems:"center",children:[Object(N.jsx)(u.a,{item:!0,xs:!0,children:Object(N.jsx)(jt.a,{href:"#",variant:"body1",style:{color:"#FFFFFF"},onClick:e.showSignupForm,children:"Create account"})}),Object(N.jsx)(u.a,{item:!0,children:Object(N.jsx)(ge.a,{type:"submit",fullWidth:!0,style:{backgroundColor:"#5784FF",color:"#FFFFFF"},variant:"contained",className:e.classes.submit,children:"Sign In"})})]})]})},xt=function(e){return Object(N.jsxs)("form",{className:e.classes.form,noValidate:!0,onSubmit:e.handleSubmitWithCleanup,children:[Object(N.jsx)(ye.a,{margin:"normal",required:!0,fullWidth:!0,onChange:e.handleInputChange,value:e.inputs.givenName,name:"givenName",className:e.classes.textfield,variant:"outlined",id:"givenName",placeholder:"Enter your given name",autoComplete:"givenName",InputLabelProps:{shrink:!0}}),Object(N.jsx)(ye.a,{margin:"normal",required:!0,fullWidth:!0,onChange:e.handleInputChange,value:e.inputs.familyName,name:"familyName",className:e.classes.textfield,variant:"outlined",id:"familyName",placeholder:"Enter your family name",autoComplete:"familyName",InputLabelProps:{shrink:!0}}),Object(N.jsx)(ye.a,{margin:"normal",required:!0,fullWidth:!0,onChange:e.handleInputChange,value:e.inputs.email,name:"email",className:e.classes.textfield,variant:"outlined",id:"email",placeholder:"Enter your email",autoComplete:"email",InputLabelProps:{shrink:!0}}),Object(N.jsx)(ye.a,{margin:"normal",required:!0,fullWidth:!0,onChange:e.handleInputChange,value:e.inputs.dob,name:"dob",type:"date",className:e.classes.textfield,variant:"outlined",id:"dob",InputLabelProps:{shrink:!0}}),Object(N.jsx)(ye.a,{margin:"normal",fullWidth:!0,className:e.classes.textfield,variant:"outlined",onChange:e.handleInputChange,required:!0,value:e.inputs.password,name:"password",placeholder:"Enter your password",type:"password",id:"password",autoComplete:"current-password",InputLabelProps:{shrink:!0}}),Object(N.jsx)(ye.a,{margin:"normal",fullWidth:!0,className:e.classes.textfield,variant:"outlined",onChange:e.handleInputChange,required:!0,value:e.inputs.confirmPassword,name:"confirmPassword",placeholder:"Confirm your password",type:"password",id:"confirmPassword",InputLabelProps:{shrink:!0}}),Object(N.jsx)(ge.a,{type:"submit",fullWidth:!0,style:{backgroundColor:"#5784FF",color:"#FFFFFF"},variant:"contained",className:e.classes.submit,children:"Create Account"})]})},Ot=function(e){return Object(N.jsxs)("form",{className:e.classes.form,noValidate:!0,onSubmit:e.sendPwResetEmail,children:[Object(N.jsx)(ye.a,{margin:"normal",required:!0,fullWidth:!0,onChange:e.handleInputChange,value:e.inputs.email,name:"email",className:e.classes.textfield,variant:"outlined",id:"email",placeholder:"Enter your email",autoComplete:"email",InputLabelProps:{shrink:!0}}),Object(N.jsx)(ge.a,{type:"submit",fullWidth:!0,style:{backgroundColor:"#5784FF",color:"#FFFFFF"},variant:"contained",className:e.classes.submit,children:"Recover Password"})]})},ft=function(){var e=P(),t=e.login,a=e.currentUser,c=e.sendPasswordResetEmail,i=e.signUp,r=Pe((function(){return t(l.email,l.password)})),l=r.inputs,o=r.handleInputChange,d=r.handleCheckboxChange,j=r.handleSubmit,b=Pe(function(){var e=Object(O.a)(x.a.mark((function e(){var t,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(""),e.next=4,i(h.email,h.password,{givenName:h.givenName,familyName:h.familyName,email:h.email,dob:new Date(h.dob)});case 4:e.next=12;break;case 6:return e.prev=6,e.t0=e.catch(0),t=e.t0.code,a=e.t0.message,w("auth/email-already-in-use"===t?"Email already in use.":"auth/invalid-email"===t?"An invalid email was used.":"auth/weak-password"===t?"Please sign up with a stronger password.":"Failed to sign up. Error message ".concat(a,".")),e.abrupt("return");case 12:U();case 13:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}()),h=b.inputs,m=b.handleInputChange,p=b.handleCheckboxChange,g=b.handleSubmit,v=Object(n.useState)(""),C=Object(f.a)(v,2),y=C[0],w=C[1],F=Object(n.useState)(""),k=Object(f.a)(F,2),S=k[0],I=k[1],E=Object(n.useState)(!1),A=Object(f.a)(E,2),D=(A[0],A[1]),W=Object(n.useState)(0),T=Object(f.a)(W,2),_=T[0],R=T[1],L=Object(ne.g)(),q=mt(),U=function(){R(0)};function G(e){return B.apply(this,arguments)}function B(){return(B=Object(O.a)(x.a.mark((function e(t){var n,c,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){D(!1)},e.prev=1,w(""),D(!0),e.next=6,j(t);case 6:console.log(a),e.next=15;break;case 9:return e.prev=9,e.t0=e.catch(1),c=e.t0.code,e.t0.message,w("auth/wrong-password"===c?"Wrong password":"auth/invalid-email"===c?"An invalid email was used.":"Failed to log in. Check if you have used the correct credentials."),e.abrupt("return",n());case 15:return i=n(),L.push("/"),e.abrupt("return",i);case 18:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}var z=function(){var e=Object(O.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,c(l.email);case 4:e.next=11;break;case 6:e.prev=6,e.t0=e.catch(1),a=e.t0.code,e.t0.message,w("auth/wrong-password"===a?"Wrong password":"auth/invalid-email"===a?"An invalid email was used.":"Failed to log in. Check if you have used the correct credentials.");case 11:I("Your password has been reset. Please check your email.");case 12:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsxs)(u.a,{container:!0,component:"main",className:q.root,children:[Object(N.jsx)(s.a,{}),Object(N.jsx)(u.a,{item:!0,xs:!1,sm:!1,md:5,className:q.image}),Object(N.jsx)(u.a,{item:!0,xs:12,sm:12,md:7,component:ue.a,elevation:6,square:!0,className:q.paperbase,children:Object(N.jsxs)("div",{className:q.paper,children:[y&&Object(N.jsx)(bt.a,{severity:"error",children:y}),S&&Object(N.jsx)(bt.a,{severity:"info",children:S}),0===_&&Object(N.jsx)(pt,{classes:q,handleSubmitWithCleanup:G,handleInputChange:o,handleCheckboxChange:d,inputs:l,showRecoverPassword:function(){R(1)},showSignupForm:function(){R(2)}}),1===_&&Object(N.jsx)(Ot,{classes:q,handleSubmitWithCleanup:G,handleInputChange:o,handleCheckboxChange:d,inputs:l,setError:w,sendPwResetEmail:z}),2===_&&Object(N.jsx)(xt,{classes:q,handleSubmitWithCleanup:g,handleInputChange:m,handleCheckboxChange:p,inputs:h,setError:w})]})})]})},gt=Object(h.a)((function(e){return{root:{display:"flex"}}})),vt=function(){gt();return Object(N.jsx)(ee.a,{children:Object(N.jsx)(F,{children:Object(N.jsxs)(ne.d,{children:[Object(N.jsx)(ne.b,{path:"/login",component:ft}),Object(N.jsx)(ot,{path:"/",to:"/login",component:lt})]})})})},Ct=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,712)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),i(e),r(e)}))};r.a.render(Object(N.jsx)(c.a.StrictMode,{children:Object(N.jsx)(vt,{})}),document.getElementById("root")),Ct()}},[[552,1,2]]]);
//# sourceMappingURL=main.2fe808a7.chunk.js.map